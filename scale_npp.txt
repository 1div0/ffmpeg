Directly from: https://trac.ffmpeg.org/ticket/5587

As best as I can tell, trying to use the scale_npp filter is always resulting in
an error such as the following for me:

Impossible to convert between the formats supported by the filter 'graph 0
input from stream 0:0' and the filter 'auto-inserted scaler 0'
Error opening filters!

An example command line is:

ffmpeg -i input_file.mkv -filter:v \
    "scale_npp=w=1316:h=1080:format=same:interp_algo=lanczos" \
    -codec:v libx264 output_file.mkv

This seems to happen regardless of what sort of input file I try. Initially was
using a rgb24 color space input file, and thinking that might have been the
problem tried a yuv420p input file, with the same result.

libavfilter is not too smart when it comes to HW acceleration. Try something
like:

ffmpeg -i input_file.mkv -filter:v \
    "hwupload_cuda,scale_npp=w=1316:h=1080:format=yuv420p:interp_algo=lanczos,hwdownload,format=yuv420p" \
    -codec:v libx264 output_file.mkv

Basically, you need to explicitly send frames to GPU and back, and you need to
manually tell libavfilter the pixel format of the frames on their way back to
main memory (which is a shame but it's how things are for now).
